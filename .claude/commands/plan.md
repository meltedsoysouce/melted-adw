---
name: plan
description: 実装計画の作成を行う
---

# TASK 

ユーザーからのプロンプトを受けて、開発/改修を行うための実装計画書を作成する

## ARGUMETNS

- prompt : ユーザーからの要望

## OUTPUT

- 実装計画書 : markdownファイルとして出力する
  - specs/{task_name} ディレクトリに作成する

## VARIABLES

- task_name : 今回実装を計画する内容に即して、適切なタスク名を考案する

# FLOWS

以下の流れに即してタスクを遂行すること

## 1. as-is/to-beの洗い出し

promptの内容から、現状(as-is)と終了後の状態(to-be)の内容をそれぞれ分析する。
以下の形で考えることを推奨

```example
<overview>
  <as-is>{現状の分析}</as-is>
  <to-be>{終了後の状態}</to-be>
</overview>
```

## 2. as-isの詳細化

分析した内容に基づき、as-isの内容を実際のコードベースに確認しに行く。
分析内容の裏どりを行い、次ステップの設計の詳細化に必要な情報を作成する

IMPORTANT:
この分析は、サブエージェントに委譲可能。サブエージェントに分析/調査を行わせ、レポートファイルを作成させることを推奨

## 3. as-is/to-beの比較

実際のコードベース(as-is)とあるべき姿(to-be)を比較し、差分を確認する。
この差分を埋めるための計画を考えていく。

- 変更が必要なファイル/シンボル/行数
- 変更の大まかな内容

以上を洗い出す

## 4. 計画書の作成

以上の分析に基づいて、 [OUTPUT] の作成を行う。
実装作業自体は、別のエージェントに行わせるので、その前提でドキュメントを作成してほしい。

また、計画をフェーズに分割。各フェーズが、それぞれ別のエージェントによって実装される。
Context Windowを考慮して実装の計画を作成すること
